# Default pipeline configuration for Invers.
#
# Edit the values in this file to tweak processing behavior without rebuilding.
# All fields are optional: any omitted value falls back to the built-in default.

defaults:
  # Enable automatic level adjustment to optimize tonal range (true/false)
  enable_auto_levels: true

  # Percentage of pixels to clip when computing auto levels (0.0-100.0). Higher values are more aggressive.
  auto_levels_clip_percent: 0.25

  # Preserve shadow/highlight headroom (don't stretch to full 0-1 range)
  # When true, output range is approximately 0.005-0.98 like Grain2Pixel
  preserve_headroom: true

  # Enable automatic white balance / color correction (true/false)
  enable_auto_color: true

  # Strength of color correction adjustment (0.0-1.0+). Higher values apply stronger color correction.
  auto_color_strength: 0.6

  # Minimum gain multiplier for color correction. Prevents over-darkening of individual channels.
  auto_color_min_gain: 0.7

  # Maximum gain multiplier for color correction. Prevents over-brightening of individual channels.
  auto_color_max_gain: 1.3

  # Percentage of brightest pixels to sample when estimating film base color (0.0-100.0)
  base_brightest_percent: 5.0

  # Method for sampling pixels when estimating film base color. Options: Median, Mean
  base_sampling_mode: Median

  # Method for inverting negative to positive. Options: Linear (simple 1.0 - pixel inversion)
  inversion_mode: Linear

  # Method for lifting shadows in tone mapping. Options: Percentile (uses percentile-based lifting)
  shadow_lift_mode: Percentile

  # Shadow lift amount as a percentile value (0.0-1.0). Higher values lift shadows more.
  shadow_lift_value: 0.02

  # Highlight compression factor (0.5-2.0+). Values > 1.0 compress highlights, < 1.0 expand them.
  highlight_compression: 0.5

  # Enable automatic exposure adjustment to normalize image brightness (true/false)
  enable_auto_exposure: true

  # Target median brightness for exposure adjustment (0.0-1.0, typically 0.25 for film)
  auto_exposure_target_median: 0.25

  # Strength of exposure correction adjustment (0.0-1.0). Controls how aggressively exposure is corrected.
  auto_exposure_strength: 0

  # Minimum gain multiplier for exposure adjustment. Prevents excessive darkening.
  auto_exposure_min_gain: 0.6

  # Maximum gain multiplier for exposure adjustment. Prevents excessive brightening.
  auto_exposure_max_gain: 1.4

  # Manual exposure compensation multiplier (0.5-2.0+). 1.0 = no adjustment.
  exposure_compensation: 1.0

  # Skip applying film-specific tone curve during processing (true/false)
  skip_tone_curve: true

  # Skip applying color correction matrix during processing (true/false)
  skip_color_matrix: false

testing:
  parameter_test_defaults:
    enable_auto_levels: true
    clip_percent: 0.25
    enable_auto_color: true
    auto_color_strength: 0.6
    auto_color_min_gain: 0.7
    auto_color_max_gain: 1.3
    base_brightest_percent: 5.0
    base_sampling_mode: Median
    inversion_mode: Linear
    shadow_lift_mode: Percentile
    shadow_lift_value: 0.02
    highlight_compression: 1.0
    tone_curve_strength: 0.5
    skip_tone_curve: true
    exposure_compensation: 1.0
    enable_auto_exposure: true
    auto_exposure_target_median: 0.25
    auto_exposure_strength: 1.0
    auto_exposure_min_gain: 0.6
    auto_exposure_max_gain: 1.4

  default_grid:
    auto_levels: [true]
    clip_percent: [0.25, 0.5, 1.0]
    auto_color: [true, false]
    auto_color_strength: [0.6, 0.8]
    auto_color_min_gain: [0.7, 0.8]
    auto_color_max_gain: [1.2, 1.3]
    base_brightest_percent: [5.0, 10.0, 15.0]
    base_sampling_mode: [Median]
    inversion_mode: [Linear]
    shadow_lift_mode: [Percentile]
    shadow_lift_value: [0.02]
    tone_curve_strength: [0.4, 0.5, 0.6, 0.7]
    exposure_compensation: [1.0]

  minimal_grid:
    auto_levels: [true]
    clip_percent: [0.25]
    auto_color: [true, false]
    auto_color_strength: [0.6, 0.8]
    auto_color_min_gain: [0.7]
    auto_color_max_gain: [1.3]
    base_brightest_percent: [5.0, 10.0]
    base_sampling_mode: [Median]
    inversion_mode: [Linear]
    shadow_lift_mode: [Percentile]
    shadow_lift_value: [0.02]
    tone_curve_strength: [0.4, 0.5, 0.6]
    exposure_compensation: [1.0]

  comprehensive_grid:
    auto_levels: [true]
    clip_percent: [0.2, 0.4, 0.6, 1.0, 2.0, 5.0]
    auto_color: [true, false]
    auto_color_strength: [0.5, 0.6, 0.8, 1.0]
    auto_color_min_gain: [0.65, 0.7, 0.75]
    auto_color_max_gain: [1.1, 1.2, 1.3, 1.4]
    base_brightest_percent: [5.0, 10.0, 15.0, 20.0]
    base_sampling_mode: [Median, Mean]
    inversion_mode: [Linear]
    shadow_lift_mode: [Percentile]
    shadow_lift_value: [0.015, 0.02, 0.03]
    tone_curve_strength: [0.3, 0.4, 0.5, 0.6, 0.7, 0.8]
    exposure_compensation: [0.9, 1.0, 1.05]
